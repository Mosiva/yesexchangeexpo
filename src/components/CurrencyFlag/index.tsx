// components/CurrencyFlag.tsx
import React from "react";
import { StyleSheet, Text } from "react-native";
import CountryFlag from "react-native-country-flag";
import { CurrencyCode } from "../../types/api";

function getFlagCode(currency: CurrencyCode): string | null {
  const map: Record<CurrencyCode, string> = {
    AED: "AE", // –î–∏—Ä—Ö–∞–º –û–ê–≠
    AMD: "AM", // –ê—Ä–º—è–Ω—Å–∫–∏–π –¥—Ä–∞–º
    AUD: "AU", // –ê–≤—Å—Ç—Ä–∞–ª–∏–π—Å–∫–∏–π –¥–æ–ª–ª–∞—Ä
    AZN: "AZ", // –ê–∑–µ—Ä–±–∞–π–¥–∂–∞–Ω—Å–∫–∏–π –º–∞–Ω–∞—Ç
    BGN: "BG", // –ë–æ–ª–≥–∞—Ä—Å–∫–∏–π –ª–µ–≤
    BHD: "BH", // –ë–∞—Ö—Ä–µ–π–Ω—Å–∫–∏–π –¥–∏–Ω–∞—Ä
    BRL: "BR", // –ë—Ä–∞–∑–∏–ª—å—Å–∫–∏–π —Ä–µ–∞–ª
    BYN: "BY", // –ë–µ–ª–æ—Ä—É—Å—Å–∫–∏–π —Ä—É–±–ª—å
    CAD: "CA", // –ö–∞–Ω–∞–¥—Å–∫–∏–π –¥–æ–ª–ª–∞—Ä
    CHF: "CH", // –®–≤–µ–π—Ü–∞—Ä—Å–∫–∏–π —Ñ—Ä–∞–Ω–∫
    CNY: "CN", // –ö–∏—Ç–∞–π—Å–∫–∏–π —é–∞–Ω—å
    CZK: "CZ", // –ß–µ—à—Å–∫–∞—è –∫—Ä–æ–Ω–∞
    DKK: "DK", // –î–∞—Ç—Å–∫–∞—è –∫—Ä–æ–Ω–∞
    EGP: "EG", // –ï–≥–∏–ø–µ—Ç—Å–∫–∏–π —Ñ—É–Ω—Ç üÜï
    EUR: "EU", // –ï–≤—Ä–æ (–æ–±—â–µ–µ–≤—Ä–æ–ø–µ–π—Å–∫–∏–π —Ñ–ª–∞–≥)
    GBP: "GB", // –§—É–Ω—Ç —Å—Ç–µ—Ä–ª–∏–Ω–≥–æ–≤
    GEL: "GE", // –ì—Ä—É–∑–∏–Ω—Å–∫–∏–π –ª–∞—Ä–∏
    HKD: "HK", // –ì–æ–Ω–∫–æ–Ω–≥—Å–∫–∏–π –¥–æ–ª–ª–∞—Ä
    HUF: "HU", // –í–µ–Ω–≥–µ—Ä—Å–∫–∏–π —Ñ–æ—Ä–∏–Ω—Ç
    IDR: "ID", // –ò–Ω–¥–æ–Ω–µ–∑–∏–π—Å–∫–∞—è —Ä—É–ø–∏—è
    ILS: "IL", // –ò–∑—Ä–∞–∏–ª—å—Å–∫–∏–π —à–µ–∫–µ–ª—å
    INR: "IN", // –ò–Ω–¥–∏–π—Å–∫–∞—è —Ä—É–ø–∏—è
    IRR: "IR", // –ò—Ä–∞–Ω—Å–∫–∏–π —Ä–∏–∞–ª üÜï
    JPY: "JP", // –Ø–ø–æ–Ω—Å–∫–∞—è –∏–µ–Ω–∞
    KGS: "KG", // –ö–∏—Ä–≥–∏–∑—Å–∫–∏–π —Å–æ–º
    KHR: "KH", // –ö–∞–º–±–æ–¥–∂–∏–π—Å–∫–∏–π —Ä–∏–µ–ª—å üÜï
    KRW: "KR", // –Æ–∂–Ω–æ–∫–æ—Ä–µ–π—Å–∫–∞—è –≤–æ–Ω–∞
    KWD: "KW", // –ö—É–≤–µ–π—Ç—Å–∫–∏–π –¥–∏–Ω–∞—Ä
    KZT: "KZ", // –ö–∞–∑–∞—Ö—Å—Ç–∞–Ω—Å–∫–∏–π —Ç–µ–Ω–≥–µ
    LKR: "LK", // –®—Ä–∏-–ª–∞–Ω–∫–∏–π—Å–∫–∞—è —Ä—É–ø–∏—è üÜï
    MDL: "MD", // –ú–æ–ª–¥–∞–≤—Å–∫–∏–π –ª–µ–π
    MNT: "MN", // –ú–æ–Ω–≥–æ–ª—å—Å–∫–∏–π —Ç—É–≥—Ä–∏–∫ üÜï
    MVR: "MV", // –ú–∞–ª—å–¥–∏–≤—Å–∫–∞—è —Ä—É—Ñ–∏—è üÜï
    MXN: "MX", // –ú–µ–∫—Å–∏–∫–∞–Ω—Å–∫–æ–µ –ø–µ—Å–æ
    MYR: "MY", // –ú–∞–ª–∞–π–∑–∏–π—Å–∫–∏–π —Ä–∏–Ω–≥–≥–∏—Ç
    NOK: "NO", // –ù–æ—Ä–≤–µ–∂—Å–∫–∞—è –∫—Ä–æ–Ω–∞
    NZD: "NZ", // –ù–æ–≤–æ–∑–µ–ª–∞–Ω–¥—Å–∫–∏–π –¥–æ–ª–ª–∞—Ä
    OMR: "OM", // –û–º–∞–Ω—Å–∫–∏–π —Ä–∏–∞–ª üÜï
    PKR: "PK", // –ü–∞–∫–∏—Å—Ç–∞–Ω—Å–∫–∞—è —Ä—É–ø–∏—è üÜï
    PLN: "PL", // –ü–æ–ª—å—Å–∫–∏–π –∑–ª–æ—Ç—ã–π
    QAR: "QA", // –ö–∞—Ç–∞—Ä—Å–∫–∏–π —Ä–∏–∞–ª
    RON: "RO", // –†—É–º—ã–Ω—Å–∫–∏–π –ª–µ–π
    RUB: "RU", // –†–æ—Å—Å–∏–π—Å–∫–∏–π —Ä—É–±–ª—å
    SAR: "SA", // –°–∞—É–¥–æ–≤—Å–∫–∏–π —Ä–∏–∞–ª
    SCR: "SC", // –°–µ–π—à–µ–ª—å—Å–∫–∞—è —Ä—É–ø–∏—è üÜï
    SEK: "SE", // –®–≤–µ–¥—Å–∫–∞—è –∫—Ä–æ–Ω–∞
    SGD: "SG", // –°–∏–Ω–≥–∞–ø—É—Ä—Å–∫–∏–π –¥–æ–ª–ª–∞—Ä
    THB: "TH", // –¢–∞–π—Å–∫–∏–π –±–∞—Ç
    TJS: "TJ", // –¢–∞–¥–∂–∏–∫—Å–∫–∏–π —Å–æ–º–æ–Ω–∏
    TMT: "TM", // –¢—É—Ä–∫–º–µ–Ω—Å–∫–∏–π –º–∞–Ω–∞—Ç
    TRY: "TR", // –¢—É—Ä–µ—Ü–∫–∞—è –ª–∏—Ä–∞
    UAH: "UA", // –£–∫—Ä–∞–∏–Ω—Å–∫–∞—è –≥—Ä–∏–≤–Ω–∞
    USD: "US", // –î–æ–ª–ª–∞—Ä –°–®–ê
    UZS: "UZ", // –£–∑–±–µ–∫—Å–∫–∏–π —Å—É–º
    VND: "VN", // –í—å–µ—Ç–Ω–∞–º—Å–∫–∏–π –¥–æ–Ω–≥
    ZAR: "ZA", // –Æ–∂–Ω–æ–∞—Ñ—Ä–∏–∫–∞–Ω—Å–∫–∏–π —Ä–∞–Ω–¥
  };

  return map[currency] ?? null;
}

type Props = {
  code: CurrencyCode;
  size?: number;
};

export default function CurrencyFlag({ code, size = 28 }: Props) {
  const iso = getFlagCode(code);
  if (!iso) {
    return <Text style={{ fontSize: size }}>üè≥Ô∏è</Text>; // fallback
  }

  return <CountryFlag isoCode={iso} size={size} style={styles.flagImg} />;
}

const styles = StyleSheet.create({
  flagImg: { width: 32, height: 32, borderRadius: 16, marginRight: 8 },
});
